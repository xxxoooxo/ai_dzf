"use strict";Object.defineProperty(exports, "__esModule", {value: true}); function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; } function _optionalChain(ops) { let lastAccessLHS = undefined; let value = ops[0]; let i = 1; while (i < ops.length) { const op = ops[i]; const fn = ops[i + 1]; i += 2; if ((op === 'optionalAccess' || op === 'optionalCall') && value == null) { return undefined; } if (op === 'access' || op === 'optionalAccess') { lastAccessLHS = value; value = fn(value); } else if (op === 'call' || op === 'optionalCall') { value = fn((...args) => value.call(lastAccessLHS, ...args)); lastAccessLHS = undefined; } } return value; }var _promises = require('fs/promises'); var _promises2 = _interopRequireDefault(_promises);var _path = require('path'); var _path2 = _interopRequireDefault(_path);var _postcss = require('@tailwindcss/postcss'); var _postcss2 = _interopRequireDefault(_postcss);var _autoprefixer = require('autoprefixer'); var _autoprefixer2 = _interopRequireDefault(_autoprefixer);var _postcss3 = require('postcss'); var _postcss4 = _interopRequireDefault(_postcss3);var _postcssmodules = require('postcss-modules'); var _postcssmodules2 = _interopRequireDefault(_postcssmodules);var _crypto = require('crypto'); var _crypto2 = _interopRequireDefault(_crypto);var c=s=>_crypto2.default.createHash("sha256").update(s).digest("hex");var u=s=>n=>{let{postcssPlugins:i={},cssModules:{enabled:d=!1,filter:m=/\.module\.css$/,exclude:g=[]}={}}=s,e="tailwindcss-module",o=new Map,f=async t=>{let O=_path2.default.basename(t.path),l=d&&m.test(O),p=[...i.prepend||[],_postcss2.default.call(void 0, ),...i.disableAutoprefixer?[]:[_autoprefixer2.default.call(void 0, )],...i.append||[]];l&&p.push(_postcssmodules2.default.call(void 0, {globalModulePaths:g,getJSON:(T,M)=>o.set(t.path,M)}));let w=await _promises2.default.readFile(t.path,"utf8"),{css:r}=await _postcss4.default.call(void 0, p).process(w,{from:t.path});if(!l)return{contents:r,loader:"css"};let a=`${e}://${c(t.path)}`,R=JSON.stringify(o.get(t.path)),x=`import "${a}"; export default ${R};`;return o.set(a,r),{contents:x,loader:"js"}},h=t=>({contents:_optionalChain([o, 'access', _ => _.get, 'call', _2 => _2(t.path), 'optionalAccess', _3 => _3.toString, 'call', _4 => _4()]),loader:"css"}),P=t=>({path:t.path,namespace:e});n.onLoad({filter:/\.css$/},f),n.onLoad({filter:/.*/,namespace:e},h),n.onResolve({filter:new RegExp(`^${e}://`)},P)};var C=(s={})=>({name:"tailwindcss",setup:u(s)});var D=C;exports.default = D; exports.tailwindPlugin = C;
